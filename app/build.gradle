

plugins {
    alias(libs.plugins.android.application)
    alias(libs.plugins.hilt.android)
}

android {
    namespace 'com.kephas.appcuisinereste'
    compileSdk 35

    defaultConfig {
        applicationId "com.kephas.appcuisinereste"
        minSdk 24
        targetSdk 35
        versionCode 1
        versionName "1.0"
        vectorDrawables { useSupportLibrary true }
    }

    buildFeatures {
        viewBinding true
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }

    packagingOptions {
        resources { excludes += ["/META-INF/{AL2.0,LGPL2.1}"] }
    }
}

dependencies {
    // ---- Dépendances de base AndroidX pour Java ----
    implementation libs.androidx.appcompat
    implementation libs.androidx.constraintlayout
    implementation libs.material
    implementation libs.androidx.lifecycle.viewmodel
    implementation libs.androidx.lifecycle.livedata
    implementation libs.androidx.navigation.fragment
    implementation libs.androidx.navigation.ui
    implementation libs.androidx.preference // Pour les écrans de paramètres
    implementation libs.androidx.work.runtime // Pour les tâches en arrière-plan

    // ---- Room (strictement Java) ----
    implementation libs.androidx.room.runtime
    // 'annotationProcessor' est la version Java de 'kapt'
    annotationProcessor libs.androidx.room.compiler

    // --- Correction pour la vérification de Room sur Windows pendant la compilation ---
    annotationProcessor "org.xerial:sqlite-jdbc:3.45.1.0"

    // ---- Hilt (pour l'injection de dépendances en Java) ----
    implementation libs.hilt.android
    annotationProcessor libs.hilt.compiler

    // ---- Bibliothèques tierces utiles en Java ----
    implementation libs.gson // Pour la manipulation de JSON
    implementation libs.glide // Pour le chargement d'images
    annotationProcessor libs.glide.compiler
    implementation libs.timber // Pour des logs améliorés

    // ---- Dépendances de test ----
    testImplementation libs.junit
    androidTestImplementation libs.androidx.test.ext.junit
    androidTestImplementation libs.androidx.test.espresso.core
    testImplementation libs.mockito.core
    testImplementation libs.androidx.arch.core.testing
    testImplementation libs.androidx.room.testing
}
